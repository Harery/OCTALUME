# OCTALUME v2.2 Slash Commands

This document defines slash commands for the new v2.2 features retrofitted from Auto-Claude.

---

## Thinking Level Commands

### /thinking-config
Configure thinking budget for the current phase or task.

**Usage:**
```
/thinking-config [level|show|help]
```

**Options:**
- `none` - No extended thinking
- `low` - 1,024 tokens
- `medium` - 4,096 tokens (default)
- `high` - 16,384 tokens
- `ultrathink` - 65,536 tokens
- `show` - Show current configuration
- `help` - Show usage information

**Examples:**
```
/thinking-config high
/thinking-config show
```

**Implementation:**
```bash
node .claude/thinking/thinking-manager.js --level high
```

---

### /thinking-budget
Get recommended thinking budget for current context.

**Usage:**
```
/thinking-budget [--phase PHASE] [--agent AGENT] [--task-type TYPE]
```

**Examples:**
```
/thinking-budget --phase spec
/thinking-budget --agent coder --task-type security
```

**Implementation:**
```bash
node .claude/thinking/thinking-manager.js --phase spec
```

---

## Context Management Commands

### /compact-context
Run context compaction on current phase outputs.

**Usage:**
```
/compact-context [--phase PHASE] [--preview]
```

**Options:**
- `--phase` - Specific phase to compact (discovery, spec, plan, code, qa)
- `--preview` - Show what would be compacted without doing it
- `--inject TARGET` - Inject compacted context into target phase

**Examples:**
```
/compact-context
/compact-context --phase discovery --preview
/compact-context --inject code
```

**Implementation:**
```bash
node .claude/compaction/context-compactor.js --spec-dir .specs/001 --compact discovery,spec
```

---

### /context-summary
Generate a quick summary of the current context.

**Usage:**
```
/context-summary [--format FORMAT]
```

**Options:**
- `--format json` - Output as JSON
- `--format markdown` - Output as Markdown (default)
- `--format inline` - Output as single line

---

## Insight Extraction Commands

### /extract-insights
Extract insights from the current session.

**Usage:**
```
/extract-insights [--save] [--format FORMAT]
```

**Options:**
- `--save` - Save insights to memory
- `--format json|markdown` - Output format (default: markdown)
- `--aggregate` - Include aggregated insights from all sessions

**Examples:**
```
/extract-insights
/extract-insights --save --format json
```

**Implementation:**
```bash
node .claude/insights/insight-extractor.js --spec-dir .specs/001 --extract
```

---

### /show-insights
Display saved insights for the current spec.

**Usage:**
```
/show-insights [--session NUM] [--aggregate]
```

**Examples:**
```
/show-insights
/show-insights --session 3
/show-insights --aggregate
```

---

## Recovery Commands

### /recovery-status
Check current recovery status and recommendations.

**Usage:**
```
/recovery-status [--verbose]
```

**Output:**
- Total subtasks tracked
- Failed attempts count
- Stuck subtasks list
- Last good commit
- PAUSE file status

**Implementation:**
```bash
node .claude/recovery/recovery-manager.js --spec-dir .specs/001 --summary
```

---

### /recovery-classify
Classify an error and get recovery recommendations.

**Usage:**
```
/recovery-classify "ERROR_MESSAGE"
```

**Example:**
```
/recovery-classify "SyntaxError: Unexpected token at line 45"
```

**Implementation:**
```bash
node .claude/recovery/recovery-manager.js --classify "ERROR_MESSAGE"
```

---

### /recovery-action
Get recommended recovery action for a subtask.

**Usage:**
```
/recovery-action --subtask SUBTASK_ID --failure FAILURE_TYPE
```

**Example:**
```
/recovery-action --subtask task-001 --failure BROKEN_BUILD
```

**Implementation:**
```bash
node .claude/recovery/recovery-manager.js --spec-dir .specs/001 --recommend --subtask task-001 --failure BROKEN_BUILD
```

---

### /recovery-rollback
Rollback to last known good commit.

**Usage:**
```
/recovery-rollback [--confirm]
```

**Options:**
- `--confirm` - Skip confirmation prompt

**Implementation:**
```bash
node .claude/recovery/recovery-manager.js --spec-dir .specs/001 --rollback
```

---

### /pause
Create PAUSE file for human intervention.

**Usage:**
```
/pause "REASON"
```

**Example:**
```
/pause "Need clarification on authentication approach"
```

**Implementation:**
```bash
node .claude/recovery/recovery-manager.js --spec-dir .specs/001 --pause "REASON"
```

---

## Agent Commands

### /agent-config
Show or modify agent configuration.

**Usage:**
```
/agent-config [AGENT_TYPE] [--show] [--tools] [--thinking]
```

**Options:**
- `AGENT_TYPE` - Specific agent (coder, researcher, qa_reviewer, etc.)
- `--show` - Show full configuration
- `--tools` - Show tools available to agent
- `--thinking` - Show thinking level for agent

**Examples:**
```
/agent-config coder --tools
/agent-config spec_writer --thinking
```

---

### /list-agents
List all available agent types.

**Usage:**
```
/list-agents [--verbose]
```

**Output:**
- Agent name
- Description
- Tools count
- Default thinking level

---

## Quick Reference

| Command | Description | Category |
|---------|-------------|----------|
| `/thinking-config` | Configure thinking level | Thinking |
| `/thinking-budget` | Get recommended budget | Thinking |
| `/compact-context` | Run context compaction | Context |
| `/context-summary` | Quick context summary | Context |
| `/extract-insights` | Extract session insights | Insights |
| `/show-insights` | Display saved insights | Insights |
| `/recovery-status` | Check recovery status | Recovery |
| `/recovery-classify` | Classify an error | Recovery |
| `/recovery-action` | Get recovery recommendation | Recovery |
| `/recovery-rollback` | Rollback to good commit | Recovery |
| `/pause` | Create PAUSE file | Recovery |
| `/agent-config` | Agent configuration | Agents |
| `/list-agents` | List agent types | Agents |

---

## Integration Notes

These commands can be invoked:
1. **Manually** - Run from terminal
2. **In prompts** - Reference in CLAUDE.md instructions
3. **In hooks** - Called by phase transition hooks
4. **In workflows** - Integrated into spec workflows

### Example: Pre-Code Phase Hook
```bash
# Before starting code phase, compact context
/compact-context --phase discovery,spec --inject code

# Set appropriate thinking level
/thinking-config high
```

### Example: Post-Session Hook
```bash
# Extract and save insights
/extract-insights --save

# Check recovery status
/recovery-status
```
